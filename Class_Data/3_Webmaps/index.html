
<html>
<head>
	<title>GeoreferencedWebmaps</title>

	<link rel="stylesheet"  href="css/leaflet.css"/> 

	<script src="js/leaflet.js"></script>

	<script src="js/jquery-2.1.1.min.js">  </script>

	<style>
	#map{position:absolute; top:0; bottom:0; left:0; width: 100%;}
	</style>


</head>
<body>
	
	<div id="map"></div>

	<script>
//initializing the map
	var map = L.map('map').setView([40.87,-73.87], 15);

//add background tile layers
	L.tileLayer('http://tile.stamen.com/toner-lite/{z}/{x}/{y}.png',
		{
			attribution: 'Tiles from <a href="http://www.openstreetmap.org/">OSM by Stamen Design</a>',
		maxZoom: 19,
		minZoom: 1
		}).addTo(map);

	
//link to the historical map image 
	var imageUrl = 'data/BronxMap.png';

//define the area that image covers
	var imageBounds = [[40.8846829955, -73.8978315922], [40.8290586719, -73.8201512858]]; 

//add georeferenced historical map
	L.imageOverlay(imageUrl, imageBounds, {opacity: 0.8}).addTo(map);


//load GeoJSON file containing roads, and style lines
  	$.getJSON('data/RoadLines.geojson',function(roadsData){
	    L.geoJson(roadsData, {
	    	color: "#ff7800",
	    	weight: 3.5,
	    	opacity: 0.65,
	    	onEachFeature: road_annon
	    }).addTo(map);
	    });  

//define popup content for road annotations
 	var road_annon = function onEachFeature(feature, layer) {
	    if (feature.properties && feature.properties.Descr) {
	    	var roadsPopup = feature.properties.Descr;
	        layer.bindPopup(roadsPopup);
	    }
	}

//load GeoJSON file containing points
	$.getJSON('data/PointAnnotations.geojson',function(bldg){
		L.geoJson(bldg,{
			onEachFeature: point_annon
	    }).addTo(map);
	});

//define popup content for point annotations
	var point_annon = function onEachFeature(feature, layer) {
	    if (feature.properties && feature.properties.Descr) {
	    	var pointsPopup = feature.properties.Name + '<br/> <img src="'+ feature.properties.ImgURL + '" width ="300px"/> <br/>' + feature.properties.Descr;
	        layer.bindPopup(pointsPopup);
	    }
	}
	
	  
//add NYLP Map Warper maps
	L.tileLayer('http://maps.nypl.org/warper/maps/tile/27688/{z}/{x}/{y}.png').addTo(map);
	
//add NYLP Map Warper maps
	L.tileLayer('http://maps.nypl.org/warper/maps/tile/17090/{z}/{x}/{y}.png').addTo(map);


	</script>
</body>
</html>